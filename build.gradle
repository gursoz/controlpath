defaultTasks 'mybuild'

@CacheableTask
abstract class TridentBuild extends DefaultTask {

   // The actual action to perform the build
    @TaskAction
    void build() {
        doBuild()
    }

    @InputDirectory
    abstract DirectoryProperty getSrcInputDir()

    @InputDirectory
    abstract DirectoryProperty getTestInputDir()

    @OutputDirectory
    abstract DirectoryProperty getOutputDir()

    def doBuild() {
        project.exec {
          workingDir '.'
	  commandLine './build/build.sh'
        }
    }
}

task mybuild(type: TridentBuild) {
  description 'Builds controlpath by invoking build.sh'
  dependsOn ':bedrock:mybuild'
  srcInputDir = file('/home/cyc/Test/learngit/gitmodule/parentrepo/controlpath/src/main/java/com/dell/controlpath')
  testInputDir = file('/home/cyc/Test/learngit/gitmodule/parentrepo/controlpath/src/test/java/com/dell/controlpath')
  outputDir = file('./output')
}

