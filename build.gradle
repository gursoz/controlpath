import com.parent.TridentBuild

project.defaultTasks 'mybuild'

@CacheableTask    
abstract class ControlpathBuild extends TridentBuild {

  @InputDirectory
  abstract DirectoryProperty getBedrockSrcDir()


  public void doBuild() {
     project.exec {
        workingDir '.'
        commandLine './build/build.sh'
     }
  }

}

task mybuild(type: ControlpathBuild) {
    srcDir = file('/home/cyc/Test/learngit/gitmodule/parentrepo/controlpath/src')
    bedrockSrcDir = file('/home/cyc/Test/learngit/gitmodule/parentrepo/bedrock/src/')
    outputDir = file('./output')
    dependsOn ':bedrock:mybuild' 
}

mybuild.onlyIf {
  return parent.isOnlyBuild('controlpath')
}
